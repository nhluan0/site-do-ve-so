<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!--   add fontawesome-->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!--add jquery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!--    css     -->
    <link rel="stylesheet" th:href="@{/css/user/user.css}">
    <link rel="stylesheet" th:href="@{/css/pagination-share.css}">
    <link rel="stylesheet" th:href="@{/css/message-delete-share.css}">
    <link rel="stylesheet" th:href="@{/css/modal-share.css}">
    <link rel="stylesheet" th:href="@{/css/header-share.css}">

    <title>Tìm người dùng</title>
</head>
<body>
<!--header chung-->
<ul class="header__content" >
    <li id="iconMenuBar"><a href="#" ><i class="fas fa-bars" style="margin-left:0.5rem"></i></a></li>
    <li class="header-laptop"><a th:href="@{/us/trang-chu}" ><i class="fas fa-home"></i></a></li>
    <li class="header-laptop"><a th:href="@{/ad/dai-ve-so}" >Đài Vé Số</a></li>
    <li class="header-laptop"><a th:href="@{/ad/showUser}" >Người Dùng</a></li>
    <li class="header-laptop"><a th:href="@{/ad/showListKq}" >Vé Số</a></li>
    <li class="header-laptop"><a th:href="@{/ad/lich-su-do-so}" >Lịch Sử Dò</a></li>


    <li class="dropDown--li header-laptop">
        <div class="header__dropdown">
            <span><a href="#">Thêm</a></span>
            <div class="header__dropdown--content">
                <p><a th:href="@{/ad/add-user}">Nguời Dùng</a></p>
                <p><a th:href="@{/ad/add-kqxs}">Vé Số</a></p>
                <p><a th:href="@{/ad/add-dai-xo-so}">Đài Vé Số</a></p>
            </div>
        </div>
    </li>
    <!--user đã xác thực thì hiện logout-->
    <li sec:authorize="isAuthenticated()">
        <form action="#" th:action="@{/logout}" method="post">
            <span>Chào</span>
            <span sec:authentication="principal.username"></span>
            <input type="submit" value="thoát">
        </form>
    </li>
</ul>

<!-- slide bar mobile-->
<ul class="slideBar__mobile">

    <li ><a th:href="@{/us/trang-chu}" >Trang chủ</a></li>
    <i class="fas fa-times icon__close"></i>
    <li ><a th:href="@{/ad/dai-ve-so}" >Đài Vé Số</a></li>
    <li ><a th:href="@{/ad/showUser}" >Người Dùng</a></li>
    <li ><a th:href="@{/ad/showListKq}" >Vé Số</a></li>
    <li ><a th:href="@{/ad/lich-su-do-so}" >Lịch Sử Dò</a></li>
    <li ><a th:href="@{/ad/add-dai-xo-so}" >Thêm Đài Vé Số</a></li>
    <li ><a th:href="@{/ad/add-user}" >Thêm Người Dùng</a></li>
    <li ><a th:href="@{/ad/add-kqxs}" >Thêm vé số</a></li>
</ul>
<div class="modal-parent"></div>
<div class="modal-container ">
    <i class="fa-solid fa-xmark close"></i>
    <div class="modal__content">Bạn có muốn xóa user không!</div>

    <div class="modal__btn--active">
        <button class="modal-btn btn__active--ok" id="deletes">Ok</button>
        <button class="modal-btn btn__active--cancel">Cancel</button>
    </div>
</div>
<div class="msg--content" th:text="${mess}" id ="mess--deletes"/>
<div class="container">
    <h3>Người Dùng</h3>

    <hr>
    <div class="f-parent">
        <div class="f-left">
            <a th:href="@{/ad/add-user}" class="btn btn-primary btn-sm ">Thêm </a>
            <a  class="btn btn-primary btn-sm btn--deletes " >
                Xóa nhiều
            </a>
        </div>
        <div class="f-right">
            <input type="text" placeholder="Tìm kiếm" id="input__find"/>
            <a th:href="@{/ad/findUser}" id="find__user"><i class="fa-solid fa-magnifying-glass"></i></a>
        </div>
    </div>

    <div class="table-responsive-xl">



        <table class="table table-bordered table-striped">
            <thead class="table-dark">
            <tr>
                <th>STT</th>
                <th>Check</th>
                <th>Tên</th>
                <th>Họ</th>
                <th>UserName</th>
                <th>Email</th>
                <th style="min-width:133px">Số điện thoại</th>
                <th style="min-width:133px">Ngày Đăng ký</th>
                <th>Vai Trò</th>
                <th STYLE="min-width:280px">Hoạt Động</th>

            </tr>
            </thead>
            <tbody >
            <tr th:each="theUser,iterStat : ${pageUser}">
                <td th:text="${iterStat.count}"/>
                <td><input class="checkBox" type="checkbox" th:value="${theUser.id}"/></td>

                <td th:text="${theUser.firstName}"/>
                <td th:text="${theUser.lastName}"/>
                <td th:text="${theUser.userName}"/>
                <td th:text="${theUser.email}"/>
                <td th:text="${theUser.phoneNumber}"/>

                <td th:text="${theUser.registerDate}"/>
                <td th:text="${theUser.role.getRole()}"/>

                <td>
                    <div class="d-flex add-delete">
                        <!--  Add tag a for button update  -->
                        <a th:href="@{/ad/update(userId=${theUser.id})}"
                           class="btn btn-sm btn-primary me-1"
                          >
                            Sửa
                        </a>
                        <!--  Add tag a for button delete  -->
                        <a th:href="@{/ad/delete(userId=${theUser.id})}"
                           class="btn btn-sm btn-danger me-1 "
                           onclick="if(!(confirm('Bạn có chắc xóa người dùng không ? '))) return false">
                            Xóa
                        </a>
                        <a th:href="@{/ad/reset(userId=${theUser.id})}"
                           class="btn btn-sm btn-info me-1 text-bg-primary"
                           onclick="if(!(confirm('Bạn có muốn reset lại mật khẩu không? '))) return false">
                            Reset mật khẩu
                        </a>

                    </div>
                </td>

            </tr>

            </tbody>

        </table>

    </div>
    <!--hien thi phan trang-->

    <div class="pag-container" >
        <a class="prev" href="/ad/phantrang?id=1" th:if ="${pageNum.size > 0}" th:text ="Đầu"/>

        <a class="pagination--num" th:each="thePage : ${pageNum}" th:href="@{/ad/phantrang(id=${thePage})}" th:text="${thePage}"/>

        <a class="next" th:href="@{/ad/phantrang(id=${pageNum.size})}" th:if ="${pageNum.size > 0}" th:text ="Cuối"/>

    </div>

</div>
<!--js hien thi message khi xoa thanh cong hay that bai-->
<script th:src="@{/js/message-share.js}"></script>
<script th:src="@{/js/user/search-username-phone.js}"></script>
<script th:src="@{/js/user/Ajax-deletes.js}"></script>
<script th:src="@{/js/modal-share.js}"></script>
<script th:src="@{/js/pagination-share.js}"></script>
<!--js an hien slide bar mobile-->
<script th:src="@{/js/share-header.js}"></script>

</body>
</html>